name: catalog
on:
  push:
    paths-ignore:
    - '.catalog'
    - '_layouts/**'
    - '.github/**'
    - 'package.json'
    - 'package-lock.json'

jobs:
  mkcatalog:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: npm run mkcatalog
      run: |
        npm install
        npm run mkcatalog
        git config --global user.email "gugegev5@gmail.com" && git config --global user.name "actions: mk catalog"
        git add -A
        git status|grep 'nothing to commit'
        if [ 1 -eq $? ]; 
        then git commit -m "[Actions: catalog] Catalog Update"; 
        git push "https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/"$GITHUB_REPOSITORY HEAD:master
        fi
        
